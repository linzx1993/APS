<div class="config-main checkContent">
    <h1 class="config-content-title">{{"ScheduleRuleSetting" | translate}}</h1>
    <p ng-if="!ruleList.length" class="mt-20 ml-50 c-999" ng-show="!ruleList.length">暂无规则，请点击<a href="javascript:;" class="c-theme-color bold" ng-click="openRuleWindow()">添加规则</a></p>
    <div ng-show="ruleList.length" class="checkItem clearfix">
        <div class="fl left-plan">
            <p class="left-plan-title tc"><span class="addRule" ng-click="openRuleWindow()" title="新建规则">新建规则</span></p>
            <nav class="fl check-rule-nav">
                <ul class="clearfix">
                    <li ng-repeat="data in ruleList" class="rule-li" ng-click="lookRule(data)" data-rule-id={{data.ruleId}} ng-class="$first ? 'active' : ''">
                        <span class="left-nav-name" title={{data.ruleName}}>{{data.ruleName}}</span>
                        <b ng-click="deleteRule($event)" title="删除规则"></b>
                    </li>
                </ul>
            </nav>
        </div>
        <div class="fr rule-content">
            <h4 class="rule-name"><input maxlength="20" ng-model="rule.ruleName" type="text" value={{rule.ruleName}}></h4>
            <form class="fr config-form" style="width: 100%;">
                <div class="simpleConfiguration">
                    <dl class="mt-15 clearfix" data-name={{scheduleRuleItemShow.isLoadOverduePoolTask}} ng-hide="scheduleRuleItemShow.isLoadOverduePoolTask"><dt class="fl">当前日期前的车间计划 ：</dt><dd class="fl ml-5 isLoadOverduePoolTask"><label for="isLoadOverduePoolTask"><input id="isLoadOverduePoolTask" name="isLoadOverduePoolTask" type="checkbox" ng-model="scheduleCheckData.isLoadOverduePoolTask" ng-checked="scheduleCheckData.isLoadOverduePoolTask"/><span class="ios-switch-btn ml-5 mr-15"></span></label></dd></dl>
                    <dl class="mt-15 clearfix" ng-hide="scheduleRuleItemShow.overduePeriod"><dt class="fl">拉取当前车间计划天数 ：</dt>
                        <dd class="fl ml-5">
                            <input id="overduePeriod" name="overduePeriod" type="text" maxlength="2" ng-model="scheduleCheckData.overduePeriod" ng-class="!scheduleCheckData.isLoadOverduePoolTask ? 'disabled' : ''" ng-value="scheduleCheckData.overduePeriod"/>
                            <span class="info">(请输入1-90范围内的整数)</span>
                        </dd>
                    </dl>
                    <dl class="mt-15 clearfix schedulePeriod" ng-hide="scheduleRuleItemShow.schedulePeriodSelected">
                        <dt class="fl">排程周期 ：</dt>
                        <dd class="fl relative ml-5">
                            <span data-value={{schedulePeriodSelected}}>按天</span>
                            <ul class="scheduleDrag">
                                <li data-value="BY_DAY">按天</li><li data-value="BY_WEEK">按周</li><li data-value="BY_TENDAY">按旬</li><li data-value="BY_HALFMONTH">按半月</li><li data-value="BY_MONTH">按月</li>
                            </ul>
                            <select ng-model="schedulePeriodSelected" name="schedulePeriod" id="schedulePeriod"><option value="BY_DAY">按天</option><option value="BY_WEEK">按周</option><option value="BY_TENDAY">按旬</option><option value="BY_HALFMONTH">按半月</option><option value="BY_MONTH">按月</option></select>
                        </dd>
                    </dl>
                    <dl class="mt-15 clearfix" ng-hide="scheduleRuleItemShow.scheduleInterval"><dt class="fl">排程间隔 ：</dt><dd class="fl ml-5"><input id="scheduleInterval" name="scheduleInterval" type="text" maxlength="2" ng-disabled="disable.scheduleInterval" ng-class="{'not-edit' : notEdit.scheduleInterval,'disabled' : disable.scheduleInterval}" ng-model="scheduleCheckData.scheduleInterval" ng-value="scheduleCheckData.scheduleInterval"/><span class="info">(请输入0-90范围内的整数)</span></dd></dl>
                    <dl class="mt-15 clearfix" ng-hide="scheduleRuleItemShow.minScheduleDay"><dt class="fl">最早起排日期 ：</dt><dd class="fl ml-5"><input id="minScheduleDay" name="minScheduleDay" class="Wdate" type="text" autocomplete="off" ng-model="scheduleCheckData.minScheduleDay" ng-value="scheduleCheckData.minScheduleDay" onClick="WdatePicker({minDate:currentTime(),dateFmt:'yyyy-MM-dd'})"/></dd></dl>
                    <dl class="mt-15 clearfix" ng-hide="scheduleRuleItemShow.freezePeriod"><dt class="fl">冻结期 ：</dt><dd class="fl ml-5"><input id="freezePeriod" name="freezePeriod" type="text" maxlength="2" ng-model="scheduleCheckData.freezePeriod" ng-value="scheduleCheckData.freezePeriod"/><span class="info">(请输入0-90范围内的整数)</span></dd></dl>
                    <dl class="mt-15 clearfix scheduleCheck ">
                        <dt class="fl">排程前校验 ：</dt>
                        <dd style="width: 600px;" class="fl ml-_15">
                            <label class="fl mb-10" ng-repeat="data in scheduleFrontData" for="validataFrom{{$index}}" ng-hide="scheduleRuleItemShow.preScheduleCheckMap[data.name]">
                                <input id="validataFrom{{$index}}" name={{data.name}} type="checkbox" value="ng-checked" ng-model="data.select" ng-checked="data.select">
                                <span class="column-content-checkbox ml-5 mr-15 input-check"></span>
                                {{data.chinese}}
                            </label>
                        </dd>
                    </dl>
                    <dl class="mt-15 clearfix scheduleCheck">
                        <dt class="fl">排程后校验 ：</dt>
                        <dd style="width: 600px;" class="fl ml-_15">
                            <label class="fl mb-10" ng-repeat="data in scheduleLaterData" for="validataLater{{$index}}" ng-hide="scheduleRuleItemShow.postScheduleCheckMap[data.name]">
                                <input id="validataLater{{$index}}" name={{data.name}} type="checkbox" value="ng-checked" ng-checked="data.select">
                                <span class="column-content-checkbox ml-5 mr-15 input-check"></span>{{data.chinese}}
                            </label>
                        </dd>
                    </dl>
                </div>
                <span class="mt-30 show-advanced-configuration" ng-class="!jAdvancedConfiguration ? 'reverse' : ''" ng-show="!jAdvancedConfiguration && !scheduleRuleItemShow.scheduleInterval" ng-click="toggleAdvancedShow(jAdvancedConfiguration)">显示高级设置</span>
                <div ng-show="jAdvancedConfiguration" class="advancedConfiguration">
                    <dl class="mt-15 clearfix pap-type" ng-hide="scheduleRuleItemShow.scheduleInterval">
                        <dt class="fl">PAP类型 ：</dt>
                        <dd class="fl relative ml-5">
                            <span data-value={{papTypeSelected}}>不启用</span>
                            <ul class="scheduleDrag">
                                <li data-value="PAP_DISABLE">不启用</li><li data-value="PAP_SCHEDULE_RULE">启用PAP控制规则</li><li data-value="PAP_DEFAULT_RULE">启用PAP默认规则</li>
                            </ul>
                            <select ng-model="papTypeSelected" name="papType" id="papType"><option ng-selected="papTypeSelected" value="PAP_DISABLE">不启用</option><option ng-selected="papTypeSelected" value="PAP_SCHEDULE_RULE">启用PAP控制规则</option><option ng-selected="papTypeSelected"   value="PAP_DEFAULT_RULE">启用PAP默认规则</option></select>
                        </dd>
                    </dl>
                    <dl class="mt-15 clearfix schedule-point" ng-hide="scheduleRuleItemShow.scheduleInterval">
                        <dt class="fl">起排工序 ：</dt>
                        <dd class="fl relative ml-5" ng-class="{'not-edit' : notEdit.schedulePointSelected,'disabled' : disable.schedulePointSelected}">
                            <span>首道工序</span>
                            <ul class="scheduleDrag">
                                <li data-value="FIRST_PROCESS">首道工序</li><li data-value="LAST_PROCESS">末道工序</li><li data-value="KEY_PROCESS">关键工序</li>
                            </ul>
                            <select ng-model="schedulePointSelected"  name="schedulePoint" id="schedulePoint"><option value="FIRST_PROCESS">首道工序</option><option value="LAST_PROCESS">末道工序</option><option value="KEY_PROCESS">关键工序</option></select>
                        </dd>
                    </dl>
                    <dl class="mt-15 clearfix" ng-hide="scheduleRuleItemShow.isFrequencyOn"><dt class="fl">启用生产频度 ：</dt><dd class="fl ml-5"><label for="isFrequencyOn"><input id="isFrequencyOn" name="isFrequencyOn" type="checkbox" ng-model="scheduleCheckData.isFrequencyOn" ng-checked="scheduleCheckData.isFrequencyOn"/><span class="ios-switch-btn ml-5 mr-15"></span></label></dd></dl>
                    <dl class="mt-15 clearfix" ng-hide="scheduleRuleItemShow.isEconomicOn"><dt class="fl">启用经济批量 ：</dt><dd class="fl ml-5"><label for="isEconomicOn"><input id="isEconomicOn" name="isEconomicOn" type="checkbox" ng-model="scheduleCheckData.isEconomicOn" ng-checked="scheduleCheckData.isEconomicOn"/><span class="ios-switch-btn ml-5 mr-15"></span></label></dd></dl>
                    <dl class="mt-15 clearfix" ng-hide="scheduleRuleItemShow.isCombinationOn"><dt class="fl">启用组合件 ：</dt><dd class="fl ml-5"><label for="isCombinationOn"><input id="isCombinationOn" name="isCombinationOn" type="checkbox" ng-model="scheduleCheckData.isCombinationOn" ng-checked="scheduleCheckData.isCombinationOn"/><span class="ios-switch-btn ml-5 mr-15"></span></label></dd></dl>
                    <dl class="mt-15 clearfix" ng-hide="scheduleRuleItemShow.isAheadOn"><dt class="fl">启用延迟生产 ：</dt><dd class="fl ml-5"><label for="isAheadOn"><input id="isAheadOn" name="isAheadOn" type="checkbox" ng-model="scheduleCheckData.isAheadOn" ng-checked="scheduleCheckData.isAheadOn"/><span class="ios-switch-btn ml-5 mr-15"></span></label></dd></dl>
                    <dl class="mt-15 clearfix" ng-hide="scheduleRuleItemShow.isUseNotMassEqu"><dt class="fl">使用非批量设备 ：</dt><dd class="fl ml-5"><label for="isUseNotMassEqu"><input id="isUseNotMassEqu" name="isUseNotMassEqu" type="checkbox" ng-model="scheduleCheckData.isUseNotMassEqu" ng-checked="scheduleCheckData.isUseNotMassEqu"/><span class="ios-switch-btn ml-5 mr-15"></span></label></dd></dl>
                    <span class="mt-30 mb-10 show-advanced-configuration" ng-class="!jExpertConfiguration ? 'reverse' : ''" ng-show="!jExpertConfiguration" ng-click="toggleExpertShow()">显示专家设置</span>
                    <p class="checkR-rule-line" ng-show="!jExpertConfiguration"></p>
                    <span class="mt-10 show-advanced-configuration" ng-class="!jAdvancedConfiguration ? 'reverse' : ''" ng-show="!jExpertConfiguration" ng-click="hideAdvancedConfig()">隐藏高级设置</span>
                    <div ng-show="jExpertConfiguration" class="expertConfiguration">
                        <div class="mt-15 clearfix schedule-weight-map jScheduleWeightMap ">
                            <h6 class="fl tr">排程因子权重 ：<br/><span class="info">(请输入0.0-100.0内的数字)</span></h6>
                            <div class="fl weight-map-box">
                                <dl class="fl clearfix" ng-hide="scheduleRuleItemShow.scheduleWeightMap.SAME_CT"><dt class="fl"><em class="red">*</em>相同刀具</dt><dd class="fl ml-5"><input id="SAME_CT" class="require" name="SAME_CT" type="text" ng-model="scheduleCheckData.scheduleWeightMap.SAME_CT" ng-value="scheduleCheckData.scheduleWeightMap.SAME_CT" /><br/><b class="hide"></b></dd></dl>
                                <!--<dl class="fl clearfix"><dt class="fl"><em class="red">*</em>相同模具</dt><dd class="fl ml-5"><input id="SAME_MOULD" class="require" name="SAME_MOULD" type="text" ng-model="scheduleCheckData.scheduleWeightMap.SAME_MOULD" ng-value="scheduleCheckData.scheduleWeightMap.SAME_MOULD" /><br/><b class="hide"></b></dd></dl>-->
                                <dl class="fl clearfix" ng-hide="scheduleRuleItemShow.scheduleWeightMap.SAME_FIXTURE"><dt class="fl"><em class="red">*</em>相同夹具</dt><dd class="fl ml-5"><input id="SAME_FIXTURE" class="require" name="SAME_FIXTURE" type="text" ng-model="scheduleCheckData.scheduleWeightMap.SAME_FIXTURE" ng-value="scheduleCheckData.scheduleWeightMap.SAME_FIXTURE" /><br/><b class="hide"></b></dd></dl>
                                <dl class="fl clearfix" ng-hide="scheduleRuleItemShow.scheduleWeightMap.SAME_MATERIAL"><dt class="fl"><em class="red">*</em>相同物料</dt><dd class="fl ml-5"><input id="SAME_MATERIAL" class="require" name="SAME_MATERIAL" type="text" ng-model="scheduleCheckData.scheduleWeightMap.SAME_MATERIAL" ng-value="scheduleCheckData.scheduleWeightMap.SAME_MATERIAL" /><br/><b class="hide"></b></dd></dl>
                                <dl class="fl clearfix" ng-hide="scheduleRuleItemShow.scheduleWeightMap.SIMILAR_MATERIAL"><dt class="fl"><em class="red">*</em>相似物料</dt><dd class="fl ml-5"><input id="SIMILAR_MATERIAL" class="require" name="SIMILAR_MATERIAL" type="text" ng-model="scheduleCheckData.scheduleWeightMap.SIMILAR_MATERIAL" ng-value="scheduleCheckData.scheduleWeightMap.SIMILAR_MATERIAL" /><br/><b class="hide"></b></dd></dl>
                                <dl class="fl clearfix" ng-hide="scheduleRuleItemShow.scheduleWeightMap.KEY_EQUIPMENT"><dt class="fl"><em class="red">*</em>关键设备</dt><dd class="fl ml-5"><input id="KEY_EQUIPMENT" class="require" name="KEY_EQUIPMENT" type="text" ng-model="scheduleCheckData.scheduleWeightMap.KEY_EQUIPMENT" ng-value="scheduleCheckData.scheduleWeightMap.KEY_EQUIPMENT" /><br/><b class="hide"></b></dd></dl>
                                <dl class="fl clearfix" ng-hide="scheduleRuleItemShow.scheduleWeightMap.MOST_USED_EQUIPMENT"><dt class="fl"><em class="red">*</em>高负荷设备</dt><dd class="fl ml-5"><input id="MOST_USED_EQUIPMENT" class="require" name="MOST_USED_EQUIPMENT" type="text" ng-model="scheduleCheckData.scheduleWeightMap.MOST_USED_EQUIPMENT" ng-value="scheduleCheckData.scheduleWeightMap.MOST_USED_EQUIPMENT" /><br/><b class="hide"></b></dd></dl>
                                <dl class="fl clearfix" ng-hide="scheduleRuleItemShow.scheduleWeightMap.SAME_COLOR"><dt class="fl"><em class="red">*</em>相同颜色</dt><dd class="fl ml-5"><input id="SAME_COLOR" class="require" name="SAME_COLOR" type="text" ng-model="scheduleCheckData.scheduleWeightMap.SAME_COLOR" ng-value="scheduleCheckData.scheduleWeightMap.SAME_COLOR" /><br/><b class="hide"></b></dd></dl>
                            </div>
                        </div>
                        <!--<p class="mt-20 mb-20 checkR-rule-line"></p>-->
                        <span class="show-advanced-configuration" ng-click="hideAdvancedConfig()">隐藏高级设置</span>
                    </div>
                </div>
                <div class="m-0-auto mt-30 mb-20 tc clearfix">
                    <a class="save-sort saveCheckConfig" href="javascript:void(0);" ng-click=saveCheckConfig()>应用</a>
                </div>
            </form>
        </div>
    </div>
</div>
<div style="display: none;" class="addNewRule">
    <div class="layer-title">
        <p>创建排程规则<span class="fr mr-20 close">×</span></p>
    </div>
    <div class="layer-content">
        <p>创建排程规则 ：<input type="text" ng-model="newRuleName" maxlength="10" class="ruleName"/></p>
        <div class="mt-20 relative">
            复制排程规则 ：<select id="ruleSelect" name="">
                <option value="0">无</option>
                <option ng-repeat="data in ruleList track by $index" value={{data.ruleId}}>{{data.ruleName}}</option>
            </select>
        </div>
        <p class="mt-30 tc">
            <a class="ml-20 mr-20 save-sort" href="javascript:;" ng-click="postNewRule()">应用</a>
            <a class="ml-20 mr-20 reset-config cancal" href="javascript:;">取消</a>
        </p>
    </div>
</div>